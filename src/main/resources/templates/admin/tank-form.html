<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <th:block th:replace="~{/layouts/base :: head(${title})}"></th:block>
    <body>
        <div th:replace="~{/layouts/base :: header}"></div>
        <div th:replace="~{/layouts/base :: navbar}"></div>

        <main>
            <div class="container">
                <h1 th:text="${title}">Create New Tank</h1>

                <!-- Flash Messages -->
                <div th:if="${error}" class="alert alert-error">
                    <span th:text="${error}">Error message</span>
                </div>

                <div class="form-container">
                    <form action="/admin/tanks" method="post">
                        <div class="form-group">
                            <label for="label">Tank Label *</label>
                            <input type="text"
                                   id="label"
                                   name="label"
                                   required
                                   pattern="[a-zA-Z0-9_-]+"
                                   placeholder="FV-1"
                                   title="Only letters, numbers, hyphens, and underscores allowed">
                            <small class="form-help">URL-safe name (e.g., FV-1, FV-2A, Fermenter-01)</small>
                        </div>

                        <div class="form-group">
                            <label for="capacity">Capacity *</label>
                            <input type="number"
                                   id="capacity"
                                   name="capacity"
                                   step="0.01"
                                   min="0"
                                   required
                                   placeholder="100.00">
                        </div>

                        <div class="form-group">
                            <label for="capacityUnitId">Capacity Unit *</label>
                            <select id="capacityUnitId" name="capacityUnitId" required>
                                <option value="">Select a unit...</option>
                                <option th:each="unit : ${units}"
                                        th:value="${unit.id}"
                                        th:text="${unit.name + ' (' + unit.abbreviation + ')'}">
                                    Barrels (bbls)
                                </option>
                            </select>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Create Tank</button>
                            <a href="/admin/tanks" class="btn btn-secondary">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </main>

        <style>
            .form-container {
                max-width: 600px;
                margin: 2rem 0;
            }

            .form-group {
                margin-bottom: 1.5rem;
            }

            .form-group label {
                display: block;
                margin-bottom: 0.5rem;
                font-weight: 600;
                color: #2c3e50;
            }

            .form-group input,
            .form-group select {
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #ecf0f1;
                border-radius: 6px;
                font-size: 1rem;
                transition: border-color 0.2s ease;
            }

            .form-group input:focus,
            .form-group select:focus {
                outline: none;
                border-color: #1abc9c;
            }

            .form-help {
                display: block;
                margin-top: 0.5rem;
                font-size: 0.85rem;
                color: #7f8c8d;
            }

            .form-actions {
                display: flex;
                gap: 1rem;
                margin-top: 2rem;
            }

            .alert {
                padding: 1rem;
                border-radius: 6px;
                margin-bottom: 1rem;
            }

            .alert-error {
                background-color: #f8d7da;
                border: 1px solid #f5c6cb;
                color: #721c24;
            }
        </style>
    </body>
</html>
